<!doctype html>
<html lang="vi">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, user-scalable=no"
        />
        <title>Quiz Game - Controller</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link
            href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/protected/css/controller.css" />
    </head>

    <body>
        <!-- Connection Status -->
        <div class="status-bar" id="statusBar">
            <span class="status-dot"></span>
            <span id="statusText">ƒêang k·∫øt n·ªëi...</span>
            <button
                class="logout-btn"
                id="logoutBtn"
                onclick="handleLogout()"
                title="ƒêƒÉng xu·∫•t"
            >
                üîí ƒêƒÉng xu·∫•t
            </button>
        </div>

        <div class="container">
            <!-- Player Names Section -->
            <section class="section">
                <div class="section-title">üë• Ng∆∞·ªùi ch∆°i</div>
                <div class="player-inputs">
                    <div class="input-group player-a-input">
                        <label>Player 1</label>
                        <input
                            type="text"
                            id="playerAInput"
                            value="A"
                            placeholder="T√™n ng∆∞·ªùi ch∆°i 1"
                        />
                    </div>
                    <div class="input-group player-b-input">
                        <label>Player 2</label>
                        <input
                            type="text"
                            id="playerBInput"
                            value="B"
                            placeholder="T√™n ng∆∞·ªùi ch∆°i 2"
                        />
                    </div>
                </div>
            </section>

            <!-- Room PIN Section -->
            <section class="section">
                <div class="section-title">üîí Ph√≤ng thi ƒë·∫•u</div>
                <div class="room-pin-area">
                    <button class="btn btn-primary" onclick="generatePin()">
                        üé≤ T·∫°o tr·∫≠n m·ªõi
                    </button>
                    <div class="pin-display hidden" id="pinDisplay">
                        <span class="pin-label">M√£ PIN:</span>
                        <span class="pin-code" id="pinCode">----</span>
                    </div>
                    <div class="room-slots" id="roomSlots">
                        <div class="slot" id="slot0">‚¨ú Player 1: ch∆∞a v√†o</div>
                        <div class="slot" id="slot1">‚¨ú Player 2: ch∆∞a v√†o</div>
                    </div>
                </div>
            </section>

            <!-- Import Questions Section -->
            <section class="section">
                <div class="section-title">üìã Nh·∫≠p kho ƒë·ªÅ</div>
                <div class="import-tabs">
                    <button
                        class="tab active"
                        id="tabSheet"
                        onclick="switchTab('sheet')"
                    >
                        Google Sheets
                    </button>
                    <button
                        class="tab"
                        id="tabExcel"
                        onclick="switchTab('excel')"
                    >
                        File Excel
                    </button>
                </div>

                <div class="tab-content" id="sheetContent">
                    <input
                        type="text"
                        id="sheetUrl"
                        class="full-input"
                        placeholder="D√°n link Google Sheets (public)..."
                    />
                    <button class="btn btn-primary" onclick="importSheet()">
                        <span>üì•</span> Import t·ª´ Sheets
                    </button>
                </div>

                <div class="tab-content hidden" id="excelContent">
                    <label class="file-upload" id="fileLabel">
                        <input
                            type="file"
                            id="excelFile"
                            accept=".xlsx,.xls,.csv"
                            multiple
                            onchange="handleFileSelect(event)"
                        />
                        <span>üìÅ Ch·ªçn file Excel / CSV (nhi·ªÅu file)</span>
                    </label>
                    <div class="selected-files" id="selectedFiles"></div>
                    <button class="btn btn-primary" onclick="uploadExcel()">
                        <span>üì§</span> Upload
                    </button>
                </div>

                <div class="import-status" id="importStatus"></div>
            </section>

            <!-- Active Question Sets -->
            <div id="questionSetsContainer"></div>

            <!-- Question Control -->
            <section class="section" id="questionSection" style="display: none">
                <div class="section-title">‚ùì ƒêi·ªÅu khi·ªÉn c√¢u h·ªèi</div>
                <div class="question-preview" id="questionPreview">-</div>
                <div class="answer-preview hidden" id="answerPreview">-</div>
                <div class="nav-row">
                    <button class="btn btn-question" onclick="randomQuestion()">
                        ‚ùì C√¢u h·ªèi
                    </button>
                    <button
                        class="btn btn-answer"
                        id="btnAnswer"
                        onclick="toggleAnswer()"
                    >
                        üëÅ Hi·ªán ƒë√°p √°n
                    </button>
                </div>
                <div class="nav-row" style="margin-top: 0.5rem">
                    <button class="btn btn-timer" onclick="startCountdown(5)">
                        ‚è± 5s
                    </button>
                    <button class="btn btn-clear" onclick="clearBuzzerWinner()">
                        ‚úï T·∫Øt hi·ªÉn th·ªã
                    </button>
                </div>
            </section>

            <!-- Score Control -->
            <section class="section">
                <div class="section-title">üèÜ ƒêi·ªÉm s·ªë</div>
                <div class="score-controls">
                    <!-- Player A -->
                    <div class="score-panel panel-a">
                        <div class="score-player-name" id="scorePlayerA">A</div>
                        <div class="score-display" id="scoreA">0</div>
                        <div class="score-buttons">
                            <button
                                class="btn btn-correct"
                                onclick="addScore(0, 1)"
                            >
                                ƒê√∫ng<br /><small>+1</small>
                            </button>
                            <button
                                class="btn btn-wrong"
                                onclick="addScore(0, -1)"
                            >
                                Sai<br /><small>-1</small>
                            </button>
                        </div>
                    </div>

                    <!-- Player B -->
                    <div class="score-panel panel-b">
                        <div class="score-player-name" id="scorePlayerB">B</div>
                        <div class="score-display" id="scoreB">0</div>
                        <div class="score-buttons">
                            <button
                                class="btn btn-correct"
                                onclick="addScore(1, 1)"
                            >
                                ƒê√∫ng<br /><small>+1</small>
                            </button>
                            <button
                                class="btn btn-wrong"
                                onclick="addScore(1, -1)"
                            >
                                Sai<br /><small>-1</small>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reset to√†n b·ªô -->
            <section class="section">
                <button
                    class="btn btn-full-reset full-btn"
                    onclick="fullResetGame()"
                >
                    üí£ Reset to√†n b·ªô
                </button>
            </section>
        </div>

        <script src="/socket.io/socket.io.js"></script>
        <script src="/protected/js/controller.js"></script>
    </body>
</html>
